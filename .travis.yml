language: java
jdk:
  - oraclejdk8
  - openjdk11

before_install:
  - chmod +x ./mvnw

install:
  - ./mvnw test-compile -DskipTests

script:
  - ./mvnw package jacoco:report

after_success:
  - ./mvnw coveralls:report
  - wget -c https://raw.githubusercontent.com/probonopd/uploadtool/3bf89c3cf3de8f8eee8b48ab0242597d72115d1d/upload.sh
  - bash upload.sh ./target/*-jar-with-dependencies.*

branches:
  except:
    - /^(?i:continuous)$/

notifications:
  email:
    on_success: never
    on_failure: change
